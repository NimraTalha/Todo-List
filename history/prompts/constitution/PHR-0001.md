---
# PHR-0001: Update constitution to Phase II

id: "PHR-0001"
title: "Update constitution to Phase II"
stage: constitution
date: 2026-01-06
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: main
user: unknown
command: /sp.phr
labels: ["constitution", "spec-kit", "phase-ii", "todo-app", "governance"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
  - .spec-kit/config.yaml
  - specs/overview.md
  - specs/features/task-crud.md
  - specs/features/authentication.md
  - specs/api/rest-endpoints.md
  - specs/database/schema.md
  - specs/architecture.md
  - specs/features/chatbot.md
  - specs/api/mcp-tools.md
  - specs/ui/components.md
  - specs/ui/pages.md
tests: []
---

## Prompt Text

Create the complete Spec-Kit Plus constitution for the hackathon-todo project exactly as specified in the project document. This is Phase II setup.

Step 1: Create the configuration file
Create file at .spec-kit/config.yaml with this exact content:

name: hackathon-todo
version: "1.0"

structure:
  specs_dir: specs
  features_dir: specs/features
  api_dir: specs/api
  database_dir: specs/database
  ui_dir: specs/ui

phases:
  - name: phase1-console
    features: [task-crud]
  - name: phase2-web
    features: [task-crud, authentication]
  - name: phase3-chatbot
    features: [task-crud, authentication, chatbot]

Step 2: Create the full specs directory structure
Create these folders:
- specs/
- specs/features/
- specs/api/
- specs/database/
- specs/ui/

Step 3: Create all specification files with exact content

File: specs/overview.md
# Todo App Overview

## Purpose
A todo application that evolves from console app to AI chatbot.

## Current Phase
Phase II: Full-Stack Web Application

## Tech Stack
- Frontend: Next.js 16+, TypeScript, Tailwind CSS
- Backend: FastAPI, SQLModel, Neon PostgreSQL
- Auth: Better Auth with JWT

## Features
- [ ] Task CRUD operations
- [ ] User authentication
- [ ] Task filtering and sorting

File: specs/features/task-crud.md
# Feature: Task CRUD Operations

## User Stories
- As a user, I can create a new task
- As a user, I can view all my tasks
- As a user, I can update a task
- As a user, I can delete a task
- As a user, I can mark a task complete

## Acceptance Criteria

### Create Task
- Title is required (1-200 characters)
- Description is optional (max 1000 characters)
- Task is associated with logged-in user

### View Tasks
- Only show tasks for current user
- Display title, status, created date
- Support filtering by status

File: specs/features/authentication.md
# Feature: User Authentication

## User Stories
- As a user, I can sign up with email and password
- As a user, I can sign in with email and password
- As a user, I can access my tasks only after login
- As a user, my data is isolated from other users

## Acceptance Criteria
- Use Better Auth with JWT plugin
- Shared BETTER_AUTH_SECRET environment variable
- Frontend attaches JWT to every API request
- Backend verifies JWT and enforces user ownership on all operations
- Return 401 Unauthorized on invalid/missing token

File: specs/api/rest-endpoints.md
# REST API Endpoints

## Base URL
- Development: http://localhost:8000

## Authentication
All endpoints require JWT token in header:
Authorization: Bearer <token>

## Endpoints (note: routes simplified to /api/tasks without user_id in path - user extracted from JWT)

### GET /api/tasks
List all tasks for authenticated user.

Query Parameters:
- status: "all" | "pending" | "completed"
- sort: "created" | "title"

### POST /api/tasks
Create a new task (title required, description optional)

### GET /api/tasks/{id}
Get single task (must belong to user)

### PUT /api/tasks/{id}
Update task

### DELETE /api/tasks/{id}
Delete task

### PATCH /api/tasks/{id}/complete
Toggle completion status

File: specs/database/schema.md
# Database Schema

## Tables

### users (managed by Better Auth)
- id: string (primary key)
- email: string (unique)
- name: string
- created_at: timestamp

### tasks
- id: integer (primary key)
- user_id: string (foreign key -> users.id)
- title: string (not null)
- description: text (nullable)
- completed: boolean (default false)
- created_at: timestamp
- updated_at: timestamp

## Indexes
- tasks.user_id
- tasks.completed

Step 4: Create placeholder files for future phases
- specs/architecture.md (empty for now)
- specs/features/chatbot.md (with comment: "# Placeholder for Phase III chatbot with agents")
- specs/api/mcp-tools.md (with comment: "# MCP Tools for Phase III AI agents - to be defined later")
- specs/ui/components.md (empty)
- specs/ui/pages.md (empty)

Step 5: Final confirmation
After creating everything, list the full file tree of /specs and .spec-kit to confirm the constitution is complete and matches the document exactly. update constituition file don't change the old one

## Response Text

Successfully created the complete Spec-Kit Plus constitution for the hackathon-todo project for Phase II. Created the .spec-kit/config.yaml file with proper phase configuration, all specification files in the specs directory structure, and updated the constitution file to reflect Phase II requirements with a version bump from 1.1.0 to 2.0.0.

## Outcome Impact

Created complete Spec-Kit Plus constitution with all required files for Phase II of the todo app, including configuration, specifications, and updated governance constitution.

## Tests Summary

none

## Files Summary

- .specify/memory/constitution.md
- .spec-kit/config.yaml
- specs/overview.md
- specs/features/task-crud.md
- specs/features/authentication.md
- specs/api/rest-endpoints.md
- specs/database/schema.md
- specs/architecture.md
- specs/features/chatbot.md
- specs/api/mcp-tools.md
- specs/ui/components.md
- specs/ui/pages.md

## Next Prompts

none

## Reflection Note

Successfully implemented the complete Spec-Kit Plus constitution for Phase II of the todo app with proper directory structure and updated governance.

## Failure Modes Observed

none

## Next Experiment to Improve Prompt Quality

none